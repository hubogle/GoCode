# 二分查找

两个易错点
1. 区间选择 `while(left < right)` or `while(left <= right)`
2. 判断选择 `right = mid` or `right = mid - 1`

区间的定义是不变量。在二分查找过程保持不变量，`while` 循环中，每次边界处理根据区间的定义来操作，这是 **循环不变量** 规则。

## 二分查找写法一
定义左闭右闭区间 `[left, right]`，特点是：
1. `left, right` 相等的情况，改区间是有意义的，所以 `while(left <= right)`。
2. `nums[mid] > target`，更新搜索范围右下标 `right = mid - 1`，因为 `nums[mid]` 不是目标值，所以左区间结束下标为 `mid - 1`。

```go
package main
func search(nums []int, target int) int {
	l, r := 0, len(nums)-1
	for l <= r { // [l,r] 左闭右闭区间
		mid := l + ((r - l) >> 2)
		if nums[mid] > target {
			r = mid - 1 // target 在左区间
		} else if nums[mid] < target {
			l = mid + 1
		} else {
			return mid
		}
	}
	return -1
}
```
## 二分查找写法二
定义左闭右开区间 `[left, right)`，特点是：
1. `left, right` 相等的情况是无意义的，所以 `while(left < right)`。
2. `nums[mid] > target` ，更新搜索范围右下标 `right = mid`，因为当前 `nums[mid]` 不是目标值，左区间为左闭右开所以结束下标为 `mid`。

```go
package main
func search(nums []int, target int) int {
	l, r := 0, len(nums)-1
	if l < r { // [l, r) 左闭右开区间
		mid := l + ((r - l) >> 2)
		if nums[mid] > target {
			r = mid // target 在左区间，左闭右开
		} else if nums[mid] < target {
			l = mid + 1
		} else {
			return mid
		}
	}
	return -1
}
```